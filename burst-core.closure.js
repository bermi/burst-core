/*Burst-Core, Copyright F1LT3R@Bocoup, License:http://bocoup.com*/(function(){function n(c,a){return c-a}var h={linear:function(c,a,d,b,e){return b*a/e+d},inOutQuad:function(c,a,d,b,e){return(a/=e/2)<1?b/2*a*a+d:-b/2*(--a*(a-2)-1)+d},inOutCubic:function(c,a,d,b,e){return(a/=e/2)<1?b/2*a*a*a+d:b/2*((a-=2)*a*a+2)+d},inOutElastic:function(c,a,d,b,e){c=1.70158;var f=0;if(a===0)return d;if((a/=e/2)==2)return d+b;f||(f=e*0.3*1.5);if(!(b<Math.abs(b))){c=f/(2*Math.PI)*Math.asin(b/b);return a<1?-0.5*b*Math.pow(2,10*(a-=1))*Math.sin((a*e-c)*2*Math.PI/f)+d:b*Math.pow(2,-10* (a-=1))*Math.sin((a*e-c)*2*Math.PI/f)*0.5+b+d}},inBounce:function(c,a,d,b,e){return b-h.outBounce(c,e-a,0,b,e)+d},outBounce:function(c,a,d,b,e){return(a/=e)<1/2.75?b*7.5625*a*a+d:a<2/2.75?b*(7.5625*(a-=1.5/2.75)*a+0.75)+d:a<2.5/2.75?b*(7.5625*(a-=2.25/2.75)*a+0.9375)+d:b*(7.5625*(a-=2.625/2.75)*a+0.984375)+d},inOutBounce:function(c,a,d,b,e){return a<e/2?h.inBounce(c,a*2,0,b,e)*0.5+d:h.outBounce(c,a*2-e,0,b,e)*0.5+b*0.5+d}},g=function(){this.timelines={};this.loaded={};this.fps= 30;this.onframe=undefined};g.prototype.timeline=function(c,a,d,b,e,f){return this.timelines[c]||(arguments.length>1?this.timelines[c]=new j(c,a,d,b,e,f,this):undefined)};g.prototype.load=function(c){return this.loaded[c]||function(){for(var a in this.timelines)return this.timelines[a]?this.loaded[a]=this.timelines[a]:this}.call(this)};g.prototype.unload=function(c){delete this.loaded[c]};g.prototype.play=function(){var c=this;this.interval=window.setInterval(function(){c.frame()},1E3/this.fps)};g.prototype.frame= function(c){this.onframe&&this.onframe();for(var a in this.loaded)this.hasOwnProperty("loaded")&&this.loaded[a].play(c)};g.prototype.stop=function(){window.clearInterval(this.interval);delete this.interval};var j=function(c,a,d,b,e,f,k){this.name=c;this.start=this.frame=a;this.end=d;this.speed=b;this.loop=e;this.callback=f;this.p=k;this.tracks={};return this};j.prototype.track=function(c,a,d){return this.tracks[c]||(arguments.length>1?this.tracks[c]=new l(c,a,d,this):undefined)};j.prototype.play= function(c){this.frame=c||(this.frame+=this.speed);if(this.loop){if(this.frame>this.end)this.frame=this.start;if(this.frame<this.start)this.frame=this.end}else{if(this.frame>=this.end){this.frame=this.end;this.p.unload(this.name);this.callback&&this.callback()}if(this.frame<=this.start){this.frame=this.start;this.p.unload(this.name);this.callback&&this.callback()}}for(var a in this.tracks)this.hasOwnProperty("tracks")&&this.tracks[a].play(this.frame)};var l=function(c,a,d,b){this.name=c; this.objRef=a;this.prop=d;this.unit=typeof this.objRef[this.prop]==="number"?undefined:this.objRef[this.prop].replace(/[.0-9]/g,"");this.p=b;this.keys=[];return this};l.prototype.key=function(c,a,d){for(var b=0,e=this.keys.length;b<e;b++)if(this.keys[b].frame===c)return this.keys[b];if(arguments.length>1){e=[];var f=[],k=this.keys[this.keys.length]=new m(c,a,d,this);for(b=0;b<this.keys.length;b++)e[b]=this.keys[b].frame;e.sort(n);for(b=0;b<this.keys.length;b++)for(var i=0;i<this.keys.length;i++)if(e[b]== this.keys[i].frame)f[b]=this.keys[i];this.keys=[];b=0;for(e=f.length;b<e;b++)this.keys[b]=f[b];return k}else return false};l.prototype.play=function(c){for(var a,d,b,e=0,f=this.keys.length;e<f;e++){a=this.keys[e];d=this.keys[e+1];if(d===undefined&&e+1>f-1)d=this.keys[f-1];if(c>=a.frame&&c<d.frame)b=h[a.ease](0,c-a.frame,a.value,d.value-a.value,d.frame-a.frame);else if(c>=d.frame||c===0)b=a.value}this.objRef[this.prop]=b+(this.unit||0)};var m=function(c,a,d,b){this.frame=c;this.value=a;this.ease=d|| "linear";this.p=b;return this};m.prototype.track=function(c,a,d){var b=this.p.p;return b.track.call(b,c,a,d)};m.prototype.key=function(c,a){var d=this.p;return d.key.call(d,c,a)};window.burst=new g})();
